# Сайт для выбора и оценки курсовых работ

Проект представляет собой веб-приложение на **Flask**, которое позволяет студентам выбирать курсовые работы и получать оценки от преподавателей. Сайт предоставляет интерфейс для студентов для выбора работы и для преподавателей — для оценки работ студентов.

## Особенности проекта

- Студенты могут выбирать темы курсовых работ их и подавать на оценку.
- Преподаватели могут оценивать работы выставлять баллы.
- Реализована система авторизации и регистрации для студентов и преподавателей.
- Студенты и преподаватели имеют разные роли и доступы.

## Структура проекта

Проект разделен на несколько частей:

```
course-picker-flask/
│
├── app/                            # Основная папка с приложением
│   ├── __init__.py                 # Инициализация приложения
│   ├── config.py                   # Конфигурации для разных сред (development, production)
│   ├── extensions.py               # Конфигурации расширений (например, базы данных, миграции)
│   ├── functions.py                # Вспомогательные функции
│   ├── models/                     # Модели базы данных
│   ├── forms/                      # Формы для регистрации, авторизации, подачи работ и оценок
│   ├── routes/                     # Роуты для авторизации, курсовых работ и оценок
│   ├── static/                     # Статические файлы (CSS, JS, изображения)
│   └── templates/                  # Шаблоны HTML
│
├── nginx/ 
│   ├── Dockerfile                  # Dockerfile для контейнеризации Nginx
│   └── nginx.conf                  # Пример конфигурации Nginx
├── run.py                          # Точка входа для запуска приложения
├── requirements.txt                # Зависимости проекта
├── Dockerfile                      # Dockerfile для контейнеризации приложения
├── docker-compose.yml              # Docker Compose для развертывания приложения
├── .flaskenv                       # Переменные окружения для Flask
├── .app.ini                        # Конфигурации для uWSGI (если используется)
├── .dockerignore                   # Игнорируемые файлы для Docker
├── .gitignore                      # Игнорируемые файлы для Git
└── .env                            # Переменные окружения для проекта
```

## Технологии

- **Flask** — микрофреймворк для Python.
- **SQLAlchemy** — ORM для работы с базой данных.
- **Flask-Migrate** — для управления миграциями базы данных.
- **Flask-SQLAlchemy** — интеграция SQLAlchemy с Flask.
- **Flask-Bcrypt** — для хеширования паролей.
- **Flask-WTF** — для работы с формами.
- **Flask-Login** — для реализации системы авторизации.
- **uWSGI** — для запуска приложения в продакшн-режиме.
- **PostgreSQL** — база данных для хранения информации о пользователях, курсовых работах и оценках.
- **Docker** — для контейнеризации приложения.
- **python-dotenv** — для загрузки переменных окружения.
- **Nginx** — веб-сервер для реверс-прокси и управления трафиком.

## Установка

### 1. Клонирование репозитория

```bash
git clone https://github.com/cdxy1/course-picker-flask.git
cd course-evaluation
```

### 2. Создание и активация виртуального окружения

Для изоляции зависимостей создайте виртуальное окружение:

```bash
# Создание виртуального окружения
python3 -m venv venv

# Активация виртуального окружения
# Для Windows
venv\Scripts\activate
# Для macOS/Linux
source venv/bin/activate
```

### 3. Установка зависимостей

Установите необходимые зависимости с помощью *pip*:

```bash
pip install -r requirements.txt
```

## 4. Настройка переменных окружения

Создайте файл `.env` в корне проекта и добавьте следующие переменные окружения:

```env
POSTGRES_USER=admin
POSTGRES_PASSWORD=3000
POSTGRES_HOST=127.0.0.1
POSTGRES_PORT=5432
POSTGRES_DB=flaskdb
NGINX_EXT_PORT=8080
```

### Описание переменных окружения:

- **POSTGRES_USER** — имя пользователя для PostgreSQL.
- **POSTGRES_PASSWORD** — пароль для подключения к базе данных.
- **POSTGRES_HOST** — хост базы данных (в Docker это будет `postgres`).
- **POSTGRES_PORT** — порт базы данных (по умолчанию `5432`).
- **POSTGRES_DB** — название базы данных.
- **NGINX_EXT_PORT** — внешний порт для контейнера Nginx.

### Настройка файла `.flaskenv`

Для удобной настройки окружения для Flask-приложения можно использовать файл `.flaskenv`. Этот файл хранит переменные окружения, которые Flask использует при запуске.

Создайте файл `.flaskenv` в корне проекта и добавьте следующие строки:

```env
FLASK_APP=app
FLASK_ENV=development
FLASK_DEBUG=True
```

### Описание переменных в `.flaskenv`:

- **FLASK_APP** — указывает основной файл приложения Flask. В данном случае это `app`, который должен содержать ваше приложение.
- **FLASK_ENV** — задает режим работы приложения. Значение `development` означает, что приложение будет работать в режиме разработки.
- **FLASK_DEBUG** — включает или отключает режим отладки. Если установлено значение `True`, приложение будет автоматически перезапускаться при изменениях в коде и выводить подробные сообщения об ошибках.

## 5. Настройка базы данных и миграций

Для создания и применения миграций базы данных используйте **Flask-Migrate** и **Alembic**.

### Инициализация базы данных

1. Инициализация миграций:

```bash
flask db init
```
   
### Создание миграции:

Эта команда создаст файл миграции на основе изменений в моделях вашего приложения:

```bash
flask db migrate
```

### Применение миграций:

Эта команда применяет миграции к базе данных, создавая или обновляя таблицы в соответствии с моделями вашего приложения:

```bash
flask db upgrade
```

## 6. Запуск приложения

После того как все зависимости установлены и база данных настроена, можно запустить приложение:

```bash
flask run
```
Приложение будет доступно по адресу: http://127.0.0.1:5432/.

## 7. Использование Docker

Проект также настроен для использования Docker. Для развертывания приложения в контейнере выполните следующие шаги:

### 1. Установка Docker

- Инструкция по установке Docker
- Инструкция по установке Docker Compose

### 2. Запуск приложения с Docker

```
docker-compose up --build
```

Эта команда создаст контейнеры для вашего приложения и базы данных.

### 3. Применение миграций в Docker

После запуска контейнеров выполните миграции базы данных:

```
docker exec -it <container_name> bash
flask db upgrade
```

### 4. Остановка контейнеров

Чтобы остановить контейнеры, используйте команду:

```
docker-compose down
```

## 8. Доступ к приложению

После запуска приложение будет доступно по адресу:

[http://localhost:5000](http://localhost:5000)

## 9. Лицензия

Этот проект лицензирован под [MIT License](https://opensource.org/licenses/MIT).



